{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{ArrowLeftIcon}from\"@heroicons/react/24/solid\";import{Link}from\"react-router-dom\";import axios from\"axios\";import Userimg from\"../images/image.png\";import productImg from\"../images/image1.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CompleteKYC(){const[userform,setUserForm]=useState({fullName:\"\",instagramHandle:\"\",phoneNumber:\"\",instagramLink:\"\",businessName:\"\",shopAddress:\"\",email:\"\",password:\"\",confirmPassword:\"\",productImage:null,profile:null});const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");}},[navigate]);useEffect(()=>{const token=localStorage.getItem(\"token\");axios.get(\"https://instagram-vendors-scam.onrender.com/myAccount\",{headers:{Authorization:`Bearer ${token}`}}).then(res=>setUserForm(res.data)).catch(err=>console.error(err));},[]);const handleSubmit=async e=>{e.preventDefault();const token=localStorage.getItem(\"token\");try{const formData=new FormData();Object.entries(userform).forEach(_ref=>{let[key,value]=_ref;if(value)formData.append(key,value);});await axios.put(\"https://instagram-vendors-scam.onrender.com/profile\",formData,{headers:{Authorization:`Bearer ${token}`,\"Content-Type\":\"multipart/form-data\"}});alert(\"Profile updated!\");}catch(error){alert(\"Update failed.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center sm:p-12 bg-slate-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-8 hover:font-bold\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-4xl\",children:\"Complete KYC Verification\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col gap-8 w-full sm:w-1/2 mt-8 bg-white p-9 rounded-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"h-12 p-3 border-4 rounded-md\",type:\"text\",placeholder:\"Instagram Handle\",onChange:e=>setUserForm({...userform,instagramHandle:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{className:\"h-12 p-3 border-4 rounded-md\",type:\"text\",placeholder:\"Instagram Link\",onChange:e=>setUserForm({...userform,instagramLink:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{className:\"h-12 p-3 border-4 rounded-md\",type:\"text\",placeholder:\"Business Name\",onChange:e=>setUserForm({...userform,businessName:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{className:\"h-12 p-3 border-4 rounded-md\",type:\"address\",placeholder:\"Shop Address\",onChange:e=>setUserForm({...userform,shopAddress:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{className:\"h-12 p-3 border-4 rounded-md\",type:\"text\",placeholder:\"Phone Number\",onChange:e=>setUserForm({...userform,phoneNumber:e.target.value})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex  items-center justify-around w-auto h-auto border-2 border-dashed rounded-lg bg-slate-50 p-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\" flex flex-col justify-center items-center cursor-pointer w-1/2 sm:w-52   h-52 bg-white border-4 rounded-lg p-4\",children:[userform.profile?/*#__PURE__*/_jsx(\"img\",{src:userform.profile instanceof File?URL.createObjectURL(userform.profile):userform.profile||Userimg,alt:\"Profile preview\"}):/*#__PURE__*/_jsx(\"img\",{className:\"\",src:Userimg,alt:\"your face\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center font-bold\",children:[\"Upload user's photo at his or her shop\",\" \"]}),/*#__PURE__*/_jsx(\"input\",{className:\"hidden h-12 p-3 border-4 rounded-md\",type:\"file\",name:\"profile\",onChange:e=>setUserForm({...userform,profile:e.target.files[0]})})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col justify-center items-center cursor-pointer w-1/2 sm:w-52   h-52 bg-white border-4 rounded-lg p-4 \",children:[userform.productImage?/*#__PURE__*/_jsx(\"img\",{src:userform.productImage instanceof File?URL.createObjectURL(userform.productImage):userform.productImage||productImg,alt:\"Profile preview\"}):/*#__PURE__*/_jsx(\"img\",{className:\"\",src:productImg,alt:\"your product\"}),/*#__PURE__*/_jsx(\"p\",{className:\" text-center font-bold\",children:\"Upload product\"}),/*#__PURE__*/_jsx(\"input\",{className:\"hidden h-12 p-3 border-4 rounded-md\",type:\"file\",name:\"productImage\",onChange:e=>setUserForm({...userform,productImage:e.target.files[0]})})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 h-12 rounded-md text-3xl text-white\",children:\"Verify\"})]})]});}export default CompleteKYC;","map":{"version":3,"names":["useState","useEffect","useNavigate","ArrowLeftIcon","Link","axios","Userimg","productImg","jsx","_jsx","jsxs","_jsxs","CompleteKYC","userform","setUserForm","fullName","instagramHandle","phoneNumber","instagramLink","businessName","shopAddress","email","password","confirmPassword","productImage","profile","navigate","token","localStorage","getItem","get","headers","Authorization","then","res","data","catch","err","console","error","handleSubmit","e","preventDefault","formData","FormData","Object","entries","forEach","_ref","key","value","append","put","alert","className","children","to","onSubmit","encType","type","placeholder","onChange","target","src","File","URL","createObjectURL","alt","name","files"],"sources":["C:/Users/user/Desktop/VendorSite/Instagram-vendors-scam/frontend/src/users/CompleteKYC.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ArrowLeftIcon } from \"@heroicons/react/24/solid\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Userimg from \"../images/image.png\";\r\nimport productImg from \"../images/image1.png\";\r\n\r\nfunction CompleteKYC() {\r\n  const [userform, setUserForm] = useState({\r\n    fullName: \"\",\r\n    instagramHandle: \"\",\r\n    phoneNumber: \"\",\r\n    instagramLink: \"\",\r\n    businessName: \"\",\r\n    shopAddress: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n    productImage: null,\r\n    profile: null,\r\n  });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      navigate(\"/login\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    axios\r\n      .get(\"https://instagram-vendors-scam.onrender.com/myAccount\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n      .then((res) => setUserForm(res.data))\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      Object.entries(userform).forEach(([key, value]) => {\r\n        if (value) formData.append(key, value);\r\n      });\r\n\r\n      await axios.put(\"https://instagram-vendors-scam.onrender.com/profile\", formData, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n\r\n      alert(\"Profile updated!\");\r\n    } catch (error) {\r\n      alert(\"Update failed.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center sm:p-12 bg-slate-50\">\r\n      <div className=\"w-full\">\r\n        <Link to=\"/\">\r\n          <ArrowLeftIcon className=\"h-8 hover:font-bold\" />\r\n        </Link>\r\n      </div>\r\n      <h1 className=\"font-bold text-4xl\">Complete KYC Verification</h1>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"flex flex-col gap-8 w-full sm:w-1/2 mt-8 bg-white p-9 rounded-lg\"\r\n        encType=\"multipart/form-data\"\r\n      >\r\n        <input\r\n          className=\"h-12 p-3 border-4 rounded-md\"\r\n          type=\"text\"\r\n          placeholder=\"Instagram Handle\"\r\n          onChange={(e) =>\r\n            setUserForm({ ...userform, instagramHandle: e.target.value })\r\n          }\r\n        />\r\n        <input\r\n          className=\"h-12 p-3 border-4 rounded-md\"\r\n          type=\"text\"\r\n          placeholder=\"Instagram Link\"\r\n          onChange={(e) =>\r\n            setUserForm({ ...userform, instagramLink: e.target.value })\r\n          }\r\n        />\r\n        <input\r\n          className=\"h-12 p-3 border-4 rounded-md\"\r\n          type=\"text\"\r\n          placeholder=\"Business Name\"\r\n          onChange={(e) =>\r\n            setUserForm({ ...userform, businessName: e.target.value })\r\n          }\r\n        />\r\n        <input\r\n          className=\"h-12 p-3 border-4 rounded-md\"\r\n          type=\"address\"\r\n          placeholder=\"Shop Address\"\r\n          onChange={(e) =>\r\n            setUserForm({ ...userform, shopAddress: e.target.value })\r\n          }\r\n        />\r\n\r\n        <input\r\n          className=\"h-12 p-3 border-4 rounded-md\"\r\n          type=\"text\"\r\n          placeholder=\"Phone Number\"\r\n          onChange={(e) =>\r\n            setUserForm({ ...userform, phoneNumber: e.target.value })\r\n          }\r\n        />\r\n\r\n        <div className=\"flex  items-center justify-around w-auto h-auto border-2 border-dashed rounded-lg bg-slate-50 p-4\">\r\n          <label className=\" flex flex-col justify-center items-center cursor-pointer w-1/2 sm:w-52   h-52 bg-white border-4 rounded-lg p-4\">\r\n            {userform.profile ? (\r\n              <img\r\n                src={\r\n                  userform.profile instanceof File\r\n                    ? URL.createObjectURL(userform.profile)\r\n                    : userform.profile || Userimg\r\n                }\r\n                alt=\"Profile preview\"\r\n              />\r\n            ) : (\r\n              <img className=\"\" src={Userimg} alt=\"your face\" />\r\n            )}\r\n            <p className=\"text-center font-bold\">\r\n              Upload user's photo at his or her shop{\" \"}\r\n            </p>\r\n            <input\r\n              className=\"hidden h-12 p-3 border-4 rounded-md\"\r\n              type=\"file\"\r\n              name=\"profile\"\r\n              onChange={(e) =>\r\n                setUserForm({ ...userform, profile: e.target.files[0] })\r\n              }\r\n            />\r\n          </label>\r\n          <label className=\"flex flex-col justify-center items-center cursor-pointer w-1/2 sm:w-52   h-52 bg-white border-4 rounded-lg p-4 \">\r\n            {userform.productImage ? (\r\n              <img\r\n                src={\r\n                  userform.productImage instanceof File\r\n                    ? URL.createObjectURL(userform.productImage)\r\n                    : userform.productImage || productImg\r\n                }\r\n                alt=\"Profile preview\"\r\n              />\r\n            ) : (\r\n              <img className=\"\" src={productImg} alt=\"your product\" />\r\n            )}\r\n            <p className=\" text-center font-bold\">Upload product</p>\r\n            <input\r\n              className=\"hidden h-12 p-3 border-4 rounded-md\"\r\n              type=\"file\"\r\n              name=\"productImage\"\r\n              onChange={(e) =>\r\n                setUserForm({ ...userform, productImage: e.target.files[0] })\r\n              }\r\n            />\r\n          </label>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-600 h-12 rounded-md text-3xl text-white\"\r\n        >\r\n          Verify\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CompleteKYC;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}